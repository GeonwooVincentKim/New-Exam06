# mini_serv テストガイド

## 基本的なテスト手順

### 1. サーバーの起動
**ターミナル1**で以下を実行：
```bash
cd /mnt/e/Study/C/Cluster5/Exam/Exam06/New-Exam06/mini-serv
cc -Wall -Werror -Wextra mini_serv.c
./a.out 1221
```

サーバーが起動すると、何も出力されません（正常です）。

### 2. クライアント1の接続
**新しいターミナル2**（別のWSLターミナルまたは別のbashセッション）で：
```bash
nc 127.0.0.1 1221
```

**期待される動作：**
- クライアント1が接続されると、ID 0が割り当てられます
- 他のクライアント（まだいないので何も表示されません）

### 3. クライアント2の接続
**新しいターミナル3**で：
```bash
nc 127.0.0.1 1221
```

**期待される動作：**
- クライアント2が接続されると、ID 1が割り当てられます
- クライアント1に以下のメッセージが表示されるはず：
  ```
  server: client 1 just arrived
  ```

### 4. メッセージの送信テスト

**クライアント1（ターミナル2）で：**
```
Hello from client 0
```

**期待される動作：**
- クライアント2（ターミナル3）に以下が表示される：
  ```
  client 0: Hello from client 0
  ```

**クライアント2（ターミナル3）で：**
```
Hi from client 1
```

**期待される動作：**
- クライアント1（ターミナル2）に以下が表示される：
  ```
  client 1: Hi from client 1
  ```

### 5. 複数行メッセージのテスト

**クライアント1で：**
```
Line 1
Line 2
Line 3
```

**期待される動作：**
- クライアント2に以下が表示される：
  ```
  client 0: Line 1
  client 0: Line 2
  client 0: Line 3
  ```

### 6. 切断テスト

**クライアント1（ターミナル2）で `Ctrl+C` を押す**

**期待される動作：**
- クライアント2（ターミナル3）に以下が表示される：
  ```
  server: client 0 just left
  ```

### 7. ファイルからの入力テスト

テスト用ファイルを作成：
```bash
echo -e "Message 1\nMessage 2\nMessage 3" > test_input.txt
```

**新しいターミナル4で：**
```bash
nc 127.0.0.1 1221 < test_input.txt
```

**期待される動作：**
- ファイルの内容が送信され、接続が切断されます
- 他のクライアント（クライアント2）にメッセージが表示される

## トラブルシューティング

### サーバーが起動しない場合
- ポートが既に使用されている可能性があります。別のポート番号を試してください。
- エラーメッセージを確認してください。

### メッセージが表示されない場合
- サーバーが正しく動作しているか確認してください。
- 複数のクライアントが接続されているか確認してください。
- コードの `broadcast` 関数と `select` の使用を確認してください。

### 接続できない場合
- サーバーが起動しているか確認してください。
- `127.0.0.1` とポート番号が正しいか確認してください。
